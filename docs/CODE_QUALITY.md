# ä»£ç è´¨é‡æ£€æŸ¥å·¥ä½œæµ

æœ¬æ–‡æ¡£æè¿°äº†é¡¹ç›®ä¸­å®žæ–½çš„ä»£ç è´¨é‡æ£€æŸ¥æµç¨‹å’Œå·¥å…·ã€‚

## ðŸ“‹ æ¦‚è¿°

æˆ‘ä»¬çš„ä»£ç è´¨é‡æ£€æŸ¥å·¥ä½œæµé€šè¿‡GitHub Actionsè‡ªåŠ¨è¿è¡Œï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œå®‰å…¨æ€§æ ‡å‡†å¾—åˆ°ç»´æŠ¤ã€‚

## ðŸ”§ å·¥å…·å’Œæ£€æŸ¥é¡¹

### 1. é™æ€ä»£ç åˆ†æž

#### Checkstyle
- **é…ç½®æ–‡ä»¶**: `checkstyle.xml`
- **æ£€æŸ¥å†…å®¹**: ä»£ç æ ¼å¼ã€å‘½åè§„èŒƒã€æ³¨é‡Šæ ‡å‡†
- **è¿è¡Œæ—¶æœº**: æ¯æ¬¡æäº¤å’ŒPull Request

#### SpotBugs
- **æ£€æŸ¥çº§åˆ«**: Max effort, Low threshold
- **æ£€æŸ¥å†…å®¹**: æ½œåœ¨çš„bugã€æ€§èƒ½é—®é¢˜ã€å®‰å…¨æ¼æ´ž
- **è¾“å‡ºæ ¼å¼**: XMLæŠ¥å‘Š

#### PMD
- **è§„åˆ™é›†**: Quickstartè§„åˆ™é›†
- **æ£€æŸ¥å†…å®¹**: ä»£ç é‡å¤ã€æœªä½¿ç”¨å˜é‡ã€ç©ºæŒ‡é’ˆæ£€æŸ¥
- **åŒ…å«**: CPDæ£€æŸ¥ï¼ˆä»£ç é‡å¤æ£€æµ‹ï¼‰

### 2. æµ‹è¯•è¦†ç›–çŽ‡

#### JaCoCo
- **è¦†ç›–çŽ‡è¦æ±‚**: æœ€ä½Ž60%æŒ‡ä»¤è¦†ç›–çŽ‡
- **æŠ¥å‘Šæ ¼å¼**: HTMLå’ŒXML
- **é›†æˆ**: Codecov.io

### 3. å®‰å…¨æ£€æŸ¥

#### OWASP Dependency Check
- **æ£€æŸ¥å†…å®¹**: ç¬¬ä¸‰æ–¹ä¾èµ–çš„å·²çŸ¥æ¼æ´ž
- **å¤±è´¥é˜ˆå€¼**: CVSS >= 7.0
- **æŠ¥å‘Šæ ¼å¼**: JSONå’ŒHTML

#### Trivy
- **æ£€æŸ¥å†…å®¹**: å®¹å™¨é•œåƒå’Œæ–‡ä»¶ç³»ç»Ÿæ¼æ´ž
- **è¾“å‡ºæ ¼å¼**: SARIF
- **é›†æˆ**: GitHub Security tab

#### CodeQL
- **è¯­è¨€**: Java
- **æ£€æŸ¥å†…å®¹**: ä»£ç å±‚é¢çš„å®‰å…¨é—®é¢˜
- **é›†æˆ**: GitHub Advanced Security

### 4. ä»£ç æ ¼å¼åŒ–

#### Google Java Format
- **æ ‡å‡†**: Google Java Style Guide
- **è‡ªåŠ¨æ ¼å¼åŒ–**: æäº¤å‰è‡ªåŠ¨è¿è¡Œ
- **æ£€æŸ¥**: æž„å»ºæ—¶éªŒè¯æ ¼å¼ä¸€è‡´æ€§

## ðŸš€ è§¦å‘æ¡ä»¶

å·¥ä½œæµåœ¨ä»¥ä¸‹æƒ…å†µä¸‹è‡ªåŠ¨è§¦å‘ï¼š
- æŽ¨é€åˆ° `main` æˆ– `develop` åˆ†æ”¯
- åˆ›å»ºé’ˆå¯¹ `main` æˆ– `develop` åˆ†æ”¯çš„Pull Request

## ðŸ“Š å·¥ä½œæµç¨‹

### Job 1: Code Quality
1. **çŽ¯å¢ƒå‡†å¤‡**: è®¾ç½®JDK 17ã€å¯åŠ¨MySQLæ•°æ®åº“
2. **é™æ€åˆ†æž**: è¿è¡ŒCheckstyleã€SpotBugsã€PMD
3. **ç¼–è¯‘**: éªŒè¯ä»£ç ç¼–è¯‘æ— è¯¯
4. **æµ‹è¯•**: è¿è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
5. **è¦†ç›–çŽ‡**: ç”ŸæˆJaCoCoæŠ¥å‘Šå¹¶ä¸Šä¼ åˆ°Codecov
6. **å®‰å…¨æ‰«æ**: OWASPä¾èµ–æ£€æŸ¥
7. **æ ¼å¼æ£€æŸ¥**: éªŒè¯Google Javaæ ¼å¼

### Job 2: Security Scan
1. **Trivyæ‰«æ**: æ–‡ä»¶ç³»ç»Ÿå’Œä¾èµ–æ¼æ´žæ‰«æ
2. **CodeQLåˆ†æž**: ä»£ç å®‰å…¨å’Œè´¨é‡åˆ†æž

### Job 3: Build Check
1. **å®Œæ•´æž„å»º**: æž„å»ºå¯æ‰§è¡ŒJAR
2. **æ–‡ä»¶éªŒè¯**: æ£€æŸ¥JARæ–‡ä»¶å¤§å°å’Œå®Œæ•´æ€§

### Job 4: Performance Check (ä»…PR)
1. **å¯åŠ¨æµ‹è¯•**: éªŒè¯åº”ç”¨èƒ½æ­£å¸¸å¯åŠ¨
2. **å“åº”æ£€æŸ¥**: éªŒè¯å¥åº·æ£€æŸ¥ç«¯ç‚¹

## ðŸ“ˆ æŠ¥å‘Šå’Œç»“æžœ

### GitHub Actions
- æ‰€æœ‰æ£€æŸ¥ç»“æžœåœ¨Actionsé¡µé¢å¯è§
- å¤±è´¥çš„æ£€æŸ¥ä¼šé˜»æ­¢åˆå¹¶
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’ŒæŠ¥å‘Š

### Codecov
- æµ‹è¯•è¦†ç›–çŽ‡è¶‹åŠ¿å›¾è¡¨
- è¦†ç›–çŽ‡å˜åŒ–è·Ÿè¸ª
- Pull Requestè¦†ç›–çŽ‡å¯¹æ¯”

### SonarCloud (å¯é€‰)
- ä»£ç è´¨é‡è¯„åˆ†
- æŠ€æœ¯å€ºåŠ¡åˆ†æž
- å®‰å…¨çƒ­ç‚¹è¯†åˆ«

## ðŸ”§ æœ¬åœ°è¿è¡Œ

### è¿è¡Œæ‰€æœ‰æ£€æŸ¥
```bash
mvn clean verify
```

### å•ç‹¬è¿è¡Œæ£€æŸ¥
```bash
# Checkstyle
mvn checkstyle:check

# SpotBugs
mvn spotbugs:check

# PMD
mvn pmd:check

# æµ‹è¯•è¦†ç›–çŽ‡
mvn jacoco:report

# OWASPæ£€æŸ¥
mvn dependency-check:check

# ä»£ç æ ¼å¼åŒ–
mvn fmt:format
```

## ðŸ“ é…ç½®è¯´æ˜Ž

### Mavenæ’ä»¶é…ç½®
æ‰€æœ‰æ’ä»¶åœ¨ `pom.xml` ä¸­é…ç½®ï¼ŒåŒ…æ‹¬ï¼š
- ç‰ˆæœ¬ç®¡ç†
- æ‰§è¡Œé˜¶æ®µ
- å¤±è´¥ç­–ç•¥
- æŠ¥å‘Šæ ¼å¼

### GitHub Secrets
ä»¥ä¸‹Secretéœ€è¦é…ç½®ï¼š
- `SONAR_TOKEN`: SonarCloudè®¤è¯ä»¤ç‰Œï¼ˆå¯é€‰ï¼‰
- `CODECOV_TOKEN`: Codecovä¸Šä¼ ä»¤ç‰Œï¼ˆè‡ªåŠ¨é…ç½®ï¼‰

## ðŸŽ¯ è´¨é‡æ ‡å‡†

### ä»£ç è¦†ç›–çŽ‡
- **ç›®æ ‡**: > 70%
- **æœ€ä½Žè¦æ±‚**: 60%
- **æ ¸å¿ƒæ¨¡å—**: > 80%

### å®‰å…¨ç­‰çº§
- **ä¸¥é‡æ¼æ´ž**: CVSS >= 7.0 (æž„å»ºå¤±è´¥)
- **ä¸­ç­‰ç­‰çº§**: CVSS 4.0-6.9 (è­¦å‘Š)
- **ä½Žç­‰çº§**: CVSS < 4.0 (ä¿¡æ¯)

### ä»£ç é£Žæ ¼
- ä¸¥æ ¼éµå¾ªGoogle Java Style
- 120å­—ç¬¦è¡Œé•¿åº¦é™åˆ¶
- ç»Ÿä¸€çš„å‘½åè§„èŒƒ

## ðŸš¨ å¤„ç†å¤±è´¥

### å¸¸è§é—®é¢˜
1. **æµ‹è¯•å¤±è´¥**: æ£€æŸ¥æµ‹è¯•çŽ¯å¢ƒé…ç½®
2. **æ ¼å¼é”™è¯¯**: è¿è¡Œ `mvn fmt:format`
3. **ä¾èµ–æ¼æ´ž**: æ›´æ–°æœ‰æ¼æ´žçš„ä¾èµ–
4. **é™æ€åˆ†æž**: ä¿®å¤ä»£ç è´¨é‡é—®é¢˜

### ä¿®å¤æµç¨‹
1. æŸ¥çœ‹å…·ä½“çš„é”™è¯¯æŠ¥å‘Š
2. åœ¨æœ¬åœ°å¤çŽ°é—®é¢˜
3. åº”ç”¨ä¿®å¤
4. é‡æ–°è¿è¡Œæ£€æŸ¥
5. æäº¤ä¿®å¤

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [Google Java Style Guide](https://google.github.io/styleguide/javaguide.html)
- [Checkstyleé…ç½®](../checkstyle.xml)
- [JaCoCoæ–‡æ¡£](https://www.jacoco.org/)
- [OWASP Dependency Check](https://jeremylong.github.io/DependencyCheck/)